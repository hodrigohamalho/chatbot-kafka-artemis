= Chatbot

This is a project that compares performance of AMQ Broker (ActiveMQ Artemis) and AMQ Streams (Strimzi - Kafka) in a simple scenario where messages don't require persistence.

image::images/chatbot-kafka-artemis.jpg[chatbot architecture diagram]

== Directory structure 

```
chatbot-kafka-artemis
└───camel-ws-to-event - responsible to produce messages in kafka and artemis
└───camel-quarkus-kafka-consumer - consumer for messages in kafka
└───camel-quarkus-artemis-consumer - consumer for messages in artemis
└───camel-ws-to-event-artemis - responsible to produce messages only in artemis
```

== Running performance tests

docker.io/lasher/artilharia

    artillery run performance-tests/artillery-plan.yaml

== Scaling OpenShift Ingress Controller (HAProxy)

[source,bash]
----
oc patch -n openshift-ingress-operator ingresscontroller/default --patch '{"spec":{"replicas": 3}}' --type=merge

# Make sure it worked
oc get -o yaml deployment/router-default -n openshift-ingress | grep replicas
----
